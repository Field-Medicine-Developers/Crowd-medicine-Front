"use strict";(self["webpackChunkqexal"]=self["webpackChunkqexal"]||[]).push([[536],{6457:function(e,t,o){o.d(t,{A:function(){return c}});var s=o(641);const l={class:"container mt-4 cb",dir:"rtl"};function i(e,t,o,i,a,m){const r=(0,s.g2)("BFormSelect");return(0,s.uX)(),(0,s.CE)("div",l,[t[2]||(t[2]=(0,s.Lk)("h2",{class:"text-center mb-4"},"اختر المؤتمر ",-1)),(0,s.bF)(r,{modelValue:a.form.conferenceVersionID,"onUpdate:modelValue":t[0]||(t[0]=e=>a.form.conferenceVersionID=e),options:a.conferenceVersionsList,onChange:t[1]||(t[1]=e=>m.fetchId())},null,8,["modelValue","options"])])}var a=o(1631),m={name:"conferenceVersionSelect",data(){return{conferenceVersionsList:[],form:{conferenceVersionID:null}}},methods:{async fetchConferenceVersions(){this.isLoading=!0;try{const e=await a.A.get("ConferenceVersion/GetAllConferenceVersions?PageNumber=1&PageSize=100");this.conferenceVersionsList=e.data.items.map((e=>({text:e.arabicName+" - "+e.year,value:e.id})))}catch(e){console.error("Error fetching conference versions:",e)}finally{this.isLoading=!1}},fetchId(){this.$emit("fetch-id",this.form.conferenceVersionID)}},mounted(){this.fetchConferenceVersions()}},r=o(6262);const n=(0,r.A)(m,[["render",i]]);var c=n},8536:function(e,t,o){o.r(t),o.d(t,{default:function(){return Z}});var s=o(641),l=o(3751),i=o(33);const a={key:0,class:"container mt-4 cb"},m={class:"card"},r={class:"card-body"},n={class:"row"},c={class:"col-md-12 mt-3"},d={class:"col-12 mt-4"},u={class:"row"},h={class:"col-md-4"},b=["onUpdate:modelValue"],f={class:"col-md-4"},p=["onUpdate:modelValue"],g={class:"col-md-4"},L=["onUpdate:modelValue"],k={class:"col-md-4 mt-3"},I=["onUpdate:modelValue"],C={class:"col-md-4 mt-3"},y=["onUpdate:modelValue"],v={class:"col-md-4 mt-3"},V=["onUpdate:modelValue"],F={class:"col-12 mt-2"},J=["onClick"],w={class:"col-12 mt-4"},x={class:"card mt-4"},N={class:"card-body"},U={class:"table-responsive"},T={class:"table table-striped table-hover"},E={class:"btn-group"},$=["onClick"],q=["onClick"],P={class:"row"},D={class:"col-md-12 mt-3"},S={class:"col-12 mt-4"},A={class:"row"},B={class:"col-md-4"},_={class:"col-md-4"},M={class:"col-md-4"},X={class:"col-md-4 mt-3"},z={class:"col-md-4 mt-3"},G={class:"col-md-4 mt-3"},K={class:"col-12 mt-4"};function Q(e,t,o,Q,W,j){const H=(0,s.g2)("conferenceVersionSelect"),O=(0,s.g2)("BFormSelect"),R=(0,s.g2)("BButton"),Y=(0,s.g2)("BModal");return(0,s.uX)(),(0,s.CE)(s.FK,null,[(0,s.bF)(H,{onFetchId:j.fetchCategories},null,8,["onFetchId"]),null!==W.conferenceVersionID?((0,s.uX)(),(0,s.CE)("div",a,[t[34]||(t[34]=(0,s.Lk)("h1",{class:"text-center mb-4"},"اعضاء اللجان",-1)),(0,s.Lk)("div",m,[(0,s.Lk)("div",r,[(0,s.Lk)("form",{onSubmit:t[3]||(t[3]=(0,l.D$)(((...e)=>j.addCommitteeItems&&j.addCommitteeItems(...e)),["prevent"])),class:"row g-3 mt-4"},[(0,s.Lk)("div",n,[(0,s.Lk)("div",c,[t[13]||(t[13]=(0,s.Lk)("label",{class:"form-label"},"القسم",-1)),(0,s.bF)(O,{modelValue:W.form.committeesCategoryId,"onUpdate:modelValue":t[0]||(t[0]=e=>W.form.committeesCategoryId=e),options:W.committeesCategories,onChange:t[1]||(t[1]=e=>j.fetchCommitteeItemss()),class:"form-select",required:""},null,8,["modelValue","options"])]),(0,s.Lk)("div",d,[t[20]||(t[20]=(0,s.Lk)("h5",null,"أعضاء اللجنة",-1)),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(W.form.CommitteeItemssItems,((e,o)=>((0,s.uX)(),(0,s.CE)("div",{key:o,class:"border p-3 mb-3 rounded"},[(0,s.Lk)("div",u,[(0,s.Lk)("div",h,[t[14]||(t[14]=(0,s.Lk)("label",{class:"form-label"},"الاسم بالعربية",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.arabicName=t,required:"",class:"form-control",placeholder:"الاسم بالعربية"},null,8,b),[[l.Jo,e.arabicName]])]),(0,s.Lk)("div",f,[t[15]||(t[15]=(0,s.Lk)("label",{class:"form-label"},"الاسم بالإنجليزية",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.englishName=t,required:"",class:"form-control",placeholder:"الاسم بالإنجليزية"},null,8,p),[[l.Jo,e.englishName]])]),(0,s.Lk)("div",g,[t[16]||(t[16]=(0,s.Lk)("label",{class:"form-label"},"الاسم بالفارسية",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.persianName=t,required:"",class:"form-control",placeholder:"الاسم بالفارسية"},null,8,L),[[l.Jo,e.persianName]])]),(0,s.Lk)("div",k,[t[17]||(t[17]=(0,s.Lk)("label",{class:"form-label"},"المسمى الوظيفي بالعربية",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.arabicJobTitle=t,required:"",class:"form-control",placeholder:"المسمى الوظيفي بالعربية"},null,8,I),[[l.Jo,e.arabicJobTitle]])]),(0,s.Lk)("div",C,[t[18]||(t[18]=(0,s.Lk)("label",{class:"form-label"},"المسمى الوظيفي بالإنجليزية",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.englishJobTitle=t,required:"",class:"form-control",placeholder:"المسمى الوظيفي بالإنجليزية"},null,8,y),[[l.Jo,e.englishJobTitle]])]),(0,s.Lk)("div",v,[t[19]||(t[19]=(0,s.Lk)("label",{class:"form-label"},"المسمى الوظيفي بالفارسية",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t=>e.persianJobTitle=t,required:"",class:"form-control",placeholder:"المسمى الوظيفي بالفارسية"},null,8,V),[[l.Jo,e.persianJobTitle]])]),(0,s.Lk)("div",F,[(0,s.Lk)("button",{type:"button",class:"btn btn-danger btn-sm",onClick:e=>j.removeCommitteeItemsItem(o)}," حذف العضو ",8,J)])])])))),128)),(0,s.Lk)("button",{type:"button",class:"btn btn-secondary mt-2",onClick:t[2]||(t[2]=(...e)=>j.addCommitteeItemsItem&&j.addCommitteeItemsItem(...e))}," إضافة عضو جديد ")])]),(0,s.Lk)("div",w,[(0,s.bF)(R,{type:"submit",variant:"primary",loading:W.isLoading,"loading-text":"يرجى الانتظار",disabled:W.isLoading},{default:(0,s.k6)((()=>t[21]||(t[21]=[(0,s.eW)(" إضافة ")]))),_:1},8,["loading","disabled"])])],32)])]),(0,s.Lk)("div",x,[(0,s.Lk)("div",N,[(0,s.Lk)("div",U,[(0,s.Lk)("table",T,[t[24]||(t[24]=(0,s.Lk)("thead",{class:"table-light"},[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"#"),(0,s.Lk)("th",null,"الاسم بالعربي"),(0,s.Lk)("th",null,"الاسم بالإنجليزية"),(0,s.Lk)("th",null,"الاسم بالفارسي"),(0,s.Lk)("th",null,"المسمى الوظيفي بالعربي"),(0,s.Lk)("th",null,"المسمى الوظيفي بالإنجليزية"),(0,s.Lk)("th",null,"المسمى الوظيفي بالفارسي"),(0,s.Lk)("th",null,"الإجراءات")])],-1)),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(W.CommitteeItemss,((e,o)=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",null,(0,i.v_)((W.currentPage-1)*W.pageSize+o+1),1),(0,s.Lk)("td",null,(0,i.v_)(e.arabicName),1),(0,s.Lk)("td",null,(0,i.v_)(e.englishName),1),(0,s.Lk)("td",null,(0,i.v_)(e.persianName),1),(0,s.Lk)("td",null,(0,i.v_)(e.arabicJobTitle),1),(0,s.Lk)("td",null,(0,i.v_)(e.englishJobTitle),1),(0,s.Lk)("td",null,(0,i.v_)(e.persianJobTitle),1),(0,s.Lk)("td",null,[(0,s.Lk)("div",E,[(0,s.Lk)("button",{class:"btn btn-sm btn-warning",onClick:t=>j.openEditModal(e),title:"تعديل"},t[22]||(t[22]=[(0,s.Lk)("i",{class:"fa fa-edit"},null,-1)]),8,$),(0,s.Lk)("button",{class:"btn btn-sm btn-danger",onClick:t=>j.deleteCommitteeItems(e.id),title:"حذف"},t[23]||(t[23]=[(0,s.Lk)("i",{class:"fa fa-trash"},null,-1)]),8,q)])])])))),128))])])])])]),(0,s.bF)(Y,{modelValue:W.editModal,"onUpdate:modelValue":t[12]||(t[12]=e=>W.editModal=e),title:"تعديل اللجنة","hide-footer":"",size:"lg"},{default:(0,s.k6)((()=>[(0,s.Lk)("form",{onSubmit:t[11]||(t[11]=(0,l.D$)(((...e)=>j.updateCommitteeItems&&j.updateCommitteeItems(...e)),["prevent"])),class:"row g-3"},[(0,s.Lk)("div",P,[(0,s.Lk)("div",D,[t[25]||(t[25]=(0,s.Lk)("label",{class:"form-label"},"القسم",-1)),(0,s.bF)(O,{modelValue:W.editForm.committeesCategoryId,"onUpdate:modelValue":t[4]||(t[4]=e=>W.editForm.committeesCategoryId=e),options:W.committeesCategories,class:"form-select",required:""},null,8,["modelValue","options"])]),(0,s.Lk)("div",S,[t[32]||(t[32]=(0,s.Lk)("h5",null,"أعضاء اللجنة",-1)),(0,s.Lk)("div",A,[(0,s.Lk)("div",B,[t[26]||(t[26]=(0,s.Lk)("label",{class:"form-label"},"الاسم بالعربية",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>W.editForm.arabicName=e),required:"",class:"form-control",placeholder:"الاسم بالعربية"},null,512),[[l.Jo,W.editForm.arabicName]])]),(0,s.Lk)("div",_,[t[27]||(t[27]=(0,s.Lk)("label",{class:"form-label"},"الاسم بالإنجليزية",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=e=>W.editForm.englishName=e),required:"",class:"form-control",placeholder:"الاسم بالإنجليزية"},null,512),[[l.Jo,W.editForm.englishName]])]),(0,s.Lk)("div",M,[t[28]||(t[28]=(0,s.Lk)("label",{class:"form-label"},"الاسم بالفارسية",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=e=>W.editForm.persianName=e),required:"",class:"form-control",placeholder:"الاسم بالفارسية"},null,512),[[l.Jo,W.editForm.persianName]])]),(0,s.Lk)("div",X,[t[29]||(t[29]=(0,s.Lk)("label",{class:"form-label"},"المسمى الوظيفي بالعربية",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=e=>W.editForm.arabicJobTitle=e),required:"",class:"form-control",placeholder:"المسمى الوظيفي بالعربية"},null,512),[[l.Jo,W.editForm.arabicJobTitle]])]),(0,s.Lk)("div",z,[t[30]||(t[30]=(0,s.Lk)("label",{class:"form-label"},"المسمى الوظيفي بالإنجليزية",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[9]||(t[9]=e=>W.editForm.englishJobTitle=e),required:"",class:"form-control",placeholder:"المسمى الوظيفي بالإنجليزية"},null,512),[[l.Jo,W.editForm.englishJobTitle]])]),(0,s.Lk)("div",G,[t[31]||(t[31]=(0,s.Lk)("label",{class:"form-label"},"المسمى الوظيفي بالفارسية",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text","onUpdate:modelValue":t[10]||(t[10]=e=>W.editForm.persianJobTitle=e),required:"",class:"form-control",placeholder:"المسمى الوظيفي بالفارسية"},null,512),[[l.Jo,W.editForm.persianJobTitle]])])])])]),(0,s.Lk)("div",K,[(0,s.bF)(R,{type:"submit",variant:"primary",loading:W.isLoading,"loading-text":"يرجى الانتظار",disabled:W.isLoading},{default:(0,s.k6)((()=>t[33]||(t[33]=[(0,s.eW)(" تعديل ")]))),_:1},8,["loading","disabled"])])],32)])),_:1},8,["modelValue"])])):(0,s.Q3)("",!0)],64)}var W=o(1631),j=o(2543),H=o(6457),O={components:{conferenceVersionSelect:H.A},data(){return{searchQuery:"",totalPages:0,totalCount:0,pageSize:10,currentPage:1,conferenceVersionID:null,isLoading:!1,editModal:!1,form:{committeesCategoryId:null,CommitteeItemssItems:[]},editForm:{id:null,committeesCategoryId:null},CommitteeItemss:[],committeesCategories:[]}},created(){this.debounceSearch=(0,j.debounce)((()=>{this.currentPage=1,this.fetchCommitteeItemss(this.form.committeesCategoryId)}),500),this.addCommitteeItemsItem()},methods:{getEmptyCommitteeItemsItem(){return{arabicName:"",englishName:"",persianName:"",arabicJobTitle:"",englishJobTitle:"",persianJobTitle:""}},addCommitteeItemsItem(){this.form.CommitteeItemssItems.push(this.getEmptyCommitteeItemsItem())},removeCommitteeItemsItem(e){this.form.CommitteeItemssItems.length>1&&this.form.CommitteeItemssItems.splice(e,1)},addEditCommitteeItemsItem(){this.editForm.CommitteeItemssItems.push(this.getEmptyCommitteeItemsItem()),console.log(this.editForm.CommitteeItemssItems)},removeEditCommitteeItemsItem(e){this.editForm.CommitteeItemssItems.length>1&&this.editForm.CommitteeItemssItems.splice(e,1)},async fetchCategories(e){this.conferenceVersionID=e,this.form.conferenceVersionID=e;try{const t=await W.A.get(`Committees/GetCommitteesCategoryById?PageNumber=1&PageSize=100&conferenceVersionID=${e}`);t.data.items.length>0&&(this.committeesCategories=t.data.items.map((e=>({text:`${e.arabicTitle}`,value:e.id}))))}catch(t){console.error("Error fetching conference versions:",t)}},async fetchCommitteeItemss(){if(this.form.committeesCategoryId){this.isLoading=!0;try{const e=await W.A.get(`Committees/GetCommitteesItemByCategoryId?PageNumber=${this.currentPage}&PageSize=10000&categoryId=${this.form.committeesCategoryId}`);e.data&&e.data.items&&(this.CommitteeItemss=e.data.items,this.totalPages=e.data.totalPages,this.totalCount=e.data.totalCount,this.currentPage>this.totalPages&&(this.currentPage=1,await this.fetchCommitteeItemss()))}catch(e){console.error("Error fetching committee items:",e),this.$toast.error("حدث خطأ أثناء جلب اللجان")}finally{this.isLoading=!1}}else this.$toast.warning("يرجى اختيار القسم أولاً")},async addCommitteeItems(){this.isLoading=!0;try{for(const e of this.form.CommitteeItemssItems)e.committeesCategoryId=this.form.committeesCategoryId,await W.A.post("Committees/AddCommitteesItem",e);await this.fetchCommitteeItemss(),this.resetForm(),this.$toast.success("تم إضافة اللجنة بنجاح")}catch(e){this.$toast.error("حدث خطأ أثناء إضافة اللجنة"),console.error(e)}finally{this.isLoading=!1}},async updateCommitteeItems(){this.isLoading=!0;try{await W.A.put(`Committees/UpdateCommitteesItem?id=${this.editForm.id}`,{...this.editForm,conferenceVersionID:Number(this.editForm.conferenceVersionID)}),await this.fetchCommitteeItemss(),this.editModal=!1,this.$toast.success("تم تحديث اللجنة بنجاح")}catch(e){this.$toast.error("حدث خطأ أثناء تحديث اللجنة")}finally{this.isLoading=!1}},async deleteCommitteeItems(e){const{value:t}=await this.$swal({title:"هل تريد حذف العضو؟",text:"لن تتمكن من استرجاع هذه اللجنة بعد الحذف",icon:"warning",showCancelButton:!0,confirmButtonText:"نعم",cancelButtonText:"لا"});if(t){this.isLoading=!0;try{await W.A.delete(`Committees/DeleteCommitteesItem?id=${e}`),await this.fetchCommitteeItemss(),this.$toast.success("تم حذف اللجنة بنجاح")}catch(o){this.$toast.error("حدث خطأ أثناء حذف اللجنة")}finally{this.isLoading=!1}}},resetForm(){this.form={CommitteeItemssItems:[this.getEmptyCommitteeItemsItem()]}},openEditModal(e){console.log(e),this.editForm={...e},console.log(e.committeesCategoryId),this.editForm.committeesCategoryId=e.committeesCategoryId,this.editModal=!0}},mounted(){}},R=o(6262);const Y=(0,R.A)(O,[["render",Q]]);var Z=Y}}]);
//# sourceMappingURL=536.82b577d5.js.map