"use strict";(self["webpackChunkqexal"]=self["webpackChunkqexal"]||[]).push([[762],{6457:function(e,i,n){n.d(i,{A:function(){return d}});var t=n(641);const o={class:"container mt-4 cb",dir:"rtl"};function s(e,i,n,s,r,a){const l=(0,t.g2)("BFormSelect");return(0,t.uX)(),(0,t.CE)("div",o,[i[2]||(i[2]=(0,t.Lk)("h2",{class:"text-center mb-4"},"اختر المؤتمر ",-1)),(0,t.bF)(l,{modelValue:r.form.conferenceVersionID,"onUpdate:modelValue":i[0]||(i[0]=e=>r.form.conferenceVersionID=e),options:r.conferenceVersionsList,onChange:i[1]||(i[1]=e=>a.fetchId())},null,8,["modelValue","options"])])}var r=n(1631),a={name:"conferenceVersionSelect",data(){return{conferenceVersionsList:[],form:{conferenceVersionID:null}}},methods:{async fetchConferenceVersions(){this.isLoading=!0;try{const e=await r.A.get("ConferenceVersion/GetAllConferenceVersions?PageNumber=1&PageSize=100");this.conferenceVersionsList=e.data.items.map((e=>({text:e.arabicName+" - "+e.year,value:e.id})))}catch(e){console.error("Error fetching conference versions:",e)}finally{this.isLoading=!1}},fetchId(){this.$emit("fetch-id",this.form.conferenceVersionID)}},mounted(){this.fetchConferenceVersions()}},l=n(6262);const c=(0,l.A)(a,[["render",s]]);var d=c},7762:function(e,i,n){n.r(i),n.d(i,{default:function(){return P}});var t=n(641),o=n(3751),s=n(33);const r={class:"container mt-4 cb",dir:"rtl"},a={class:"card"},l={class:"card-body"},c={class:"row"},d={class:"col-md-4 mt-3"},p={class:"col-md-4 mt-3"},h={class:"col-md-4 mt-3"},m={class:"col-md-12 mt-3"},u={class:"card mt-4"},f={class:"card-body"},g={class:"table table-striped table-hover mt-3"},D=["href"],b={class:"btn-group"},F=["onClick"],L=["onClick"],k={class:"mb-3"},V={class:"mb-3"},v={class:"mb-3"},y={class:"mb-3"};function C(e,i,n,C,w,I){const x=(0,t.g2)("conferenceVersionSelect"),A=(0,t.g2)("BButton"),E=(0,t.g2)("b-pagination"),P=(0,t.g2)("BModal");return(0,t.uX)(),(0,t.CE)(t.FK,null,[(0,t.bF)(x,{onFetchId:I.fetchFiles},null,8,["onFetchId"]),(0,t.Lk)("div",r,[i[23]||(i[23]=(0,t.Lk)("h1",{class:"text-center mb-4"},"الملفات",-1)),(0,t.Lk)("div",a,[(0,t.Lk)("div",l,[(0,t.Lk)("form",{onSubmit:i[4]||(i[4]=(0,o.D$)(((...e)=>I.addFiles&&I.addFiles(...e)),["prevent"])),enctype:"multipart/form-data"},[(0,t.Lk)("div",c,[(0,t.Lk)("div",d,[i[12]||(i[12]=(0,t.Lk)("label",{for:"arabicDescription",class:"form-label"},"الوصف بالعربية",-1)),(0,t.bo)((0,t.Lk)("textarea",{id:"arabicDescription","onUpdate:modelValue":i[0]||(i[0]=e=>w.form.arabicDescription=e),class:"form-control",placeholder:"الوصف بالعربية"},null,512),[[o.Jo,w.form.arabicDescription]])]),(0,t.Lk)("div",p,[i[13]||(i[13]=(0,t.Lk)("label",{for:"englishDescription",class:"form-label"},"الوصف بالإنجليزية",-1)),(0,t.bo)((0,t.Lk)("textarea",{id:"englishDescription","onUpdate:modelValue":i[1]||(i[1]=e=>w.form.englishDescription=e),class:"form-control",placeholder:"الوصف بالإنجليزية"},null,512),[[o.Jo,w.form.englishDescription]])]),(0,t.Lk)("div",h,[i[14]||(i[14]=(0,t.Lk)("label",{for:"persianDescription",class:"form-label"},"الوصف بالفارسية",-1)),(0,t.bo)((0,t.Lk)("textarea",{id:"persianDescription","onUpdate:modelValue":i[2]||(i[2]=e=>w.form.persianDescription=e),class:"form-control",placeholder:"الوصف بالفارسية"},null,512),[[o.Jo,w.form.persianDescription]])]),(0,t.Lk)("div",m,[i[15]||(i[15]=(0,t.Lk)("label",{for:"icon",class:"form-label"},"الملف",-1)),(0,t.Lk)("input",{id:"icon",type:"file",onChange:i[3]||(i[3]=(...e)=>I.onFileChange&&I.onFileChange(...e)),class:"form-control"},null,32)])]),(0,t.bF)(A,{type:"submit",variant:"primary",loading:w.isLoading,"loading-text":"يرجى الانتظار",disabled:w.isLoading},{default:(0,t.k6)((()=>i[16]||(i[16]=[(0,t.eW)("اضافة")]))),_:1},8,["loading","disabled"])],32)])]),(0,t.Lk)("div",u,[(0,t.Lk)("div",f,[(0,t.Lk)("table",g,[i[17]||(i[17]=(0,t.Lk)("thead",null,[(0,t.Lk)("tr",null,[(0,t.Lk)("th",null,"الرقم"),(0,t.Lk)("th",null,"الملف"),(0,t.Lk)("th",null,"الوصف بالعربية"),(0,t.Lk)("th",null,"الوصف بالإنجليزية"),(0,t.Lk)("th",null,"الوصف بالفارسية"),(0,t.Lk)("th",null,"الإجراءات")])],-1)),(0,t.Lk)("tbody",null,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(w.categories,((e,i)=>((0,t.uX)(),(0,t.CE)("tr",{key:e.id},[(0,t.Lk)("td",null,(0,s.v_)((w.currentPage-1)*w.pageSize+i+1),1),(0,t.Lk)("td",null,[(0,t.Lk)("a",{href:e.theFileFullUrl,alt:"icon",style:{width:"50px",height:"50px"},target:"_blank"},"عرض الملف",8,D)]),(0,t.Lk)("td",null,(0,s.v_)(e.arabicDescription),1),(0,t.Lk)("td",null,(0,s.v_)(e.englishDescription),1),(0,t.Lk)("td",null,(0,s.v_)(e.persianDescription),1),(0,t.Lk)("td",null,[(0,t.Lk)("div",b,[(0,t.Lk)("button",{class:"btn btn-warning btn-sm",onClick:i=>I.openEditModal(e)}," تعديل ",8,F),(0,t.Lk)("button",{class:"btn btn-danger btn-sm",onClick:i=>I.deleteFiles(e.id)}," حذف ",8,L)])])])))),128))])]),w.totalPages>1?((0,t.uX)(),(0,t.Wv)(E,{key:0,modelValue:w.currentPage,"onUpdate:modelValue":i[5]||(i[5]=e=>w.currentPage=e),"total-rows":w.totalCount,"per-page":w.pageSize,variant:"primary",class:"mt-3",onChange:e.fetchData},null,8,["modelValue","total-rows","per-page","onChange"])):(0,t.Q3)("",!0)])]),(0,t.bF)(P,{modelValue:w.editModal,"onUpdate:modelValue":i[11]||(i[11]=e=>w.editModal=e),"hide-footer":"","hide-header":""},{default:(0,t.k6)((()=>[(0,t.Lk)("form",{onSubmit:i[10]||(i[10]=(0,o.D$)(((...e)=>I.updateFiles&&I.updateFiles(...e)),["prevent"]))},[(0,t.Lk)("div",k,[i[18]||(i[18]=(0,t.Lk)("label",{for:"editArabicDescription",class:"form-label"},"الوصف بالعربية",-1)),(0,t.bo)((0,t.Lk)("textarea",{id:"editArabicDescription","onUpdate:modelValue":i[6]||(i[6]=e=>w.editForm.arabicDescription=e),required:"",class:"form-control",rows:"3",placeholder:"الوصف بالعربية"},null,512),[[o.Jo,w.editForm.arabicDescription]])]),(0,t.Lk)("div",V,[i[19]||(i[19]=(0,t.Lk)("label",{for:"editEnglishDescription",class:"form-label"},"الوصف بالإنجليزية",-1)),(0,t.bo)((0,t.Lk)("textarea",{id:"editEnglishDescription","onUpdate:modelValue":i[7]||(i[7]=e=>w.editForm.englishDescription=e),required:"",class:"form-control",rows:"3",placeholder:"الوصف بالإنجليزية"},null,512),[[o.Jo,w.editForm.englishDescription]])]),(0,t.Lk)("div",v,[i[20]||(i[20]=(0,t.Lk)("label",{for:"editPersianDescription",class:"form-label"},"الوصف بالفارسية",-1)),(0,t.bo)((0,t.Lk)("textarea",{id:"editPersianDescription","onUpdate:modelValue":i[8]||(i[8]=e=>w.editForm.persianDescription=e),required:"",class:"form-control",rows:"3",placeholder:"الوصف بالفارسية"},null,512),[[o.Jo,w.editForm.persianDescription]])]),(0,t.Lk)("div",y,[i[21]||(i[21]=(0,t.Lk)("label",{for:"editIcon",class:"form-label"},"الأيقونة",-1)),(0,t.Lk)("input",{id:"editIcon",type:"file",onChange:i[9]||(i[9]=(...e)=>I.onFileEditChange&&I.onFileEditChange(...e)),class:"form-control"},null,32)]),(0,t.bF)(A,{type:"submit",variant:"primary",loading:w.isLoading,"loading-text":"يرجى الانتظار"},{default:(0,t.k6)((()=>i[22]||(i[22]=[(0,t.eW)("حفظ التغييرات")]))),_:1},8,["loading"])],32)])),_:1},8,["modelValue"])])],64)}var w=n(1631),I=n(6457),x={components:{conferenceVersionSelect:I.A},data(){return{conferenceVersionID:null,totalPages:0,totalCount:0,pageSize:10,currentPage:1,isLoading:!1,editModal:!1,form:{arabicDescription:"",englishDescription:"",persianDescription:"",newFile:null,conferenceVersionID:null},editForm:{id:null,arabicDescription:"",englishDescription:"",persianDescription:"",newFile:null,conferenceVersionID:null},categories:[]}},methods:{onFileChange(e){this.form.newFile=e.target.files[0]},onFileEditChange(e){this.editForm.newFile=e.target.files[0]},async addFiles(){this.isLoading=!0;try{const e=new FormData;e.append("ArabicDescription",this.form.arabicDescription),e.append("EnglishDescription",this.form.englishDescription),e.append("PersianDescription",this.form.persianDescription),e.append("TheFiles",this.form.newFile),e.append("ConferenceVersionID",this.conferenceVersionID),await w.A.post("Files/AddFiles",e,{headers:{"Content-Type":"multipart/form-data"}}),this.$toast.open({message:"تم بنجاح",type:"success"}),this.fetchFiles(this.conferenceVersionID),this.resetForm()}catch(e){this.$toast.open({message:"يوجد خطأ ما",type:"error"})}finally{this.isLoading=!1}},async fetchFiles(e){this.conferenceVersionID=e,this.form.conferenceVersionID=e;try{const i=await w.A.get(`Files/GetAllFiles?PageNumber=${this.currentPage}&PageSize=${this.pageSize}&conferenceVersionID=${e}`);this.categories=i.data.items}catch(i){console.error("Error fetching conference versions:",i)}},openEditModal(e){this.editForm={...e},this.editModal=!0},async updateFiles(){this.isLoading=!0;const e=new FormData;e.append("ArabicDescription",this.editForm.arabicDescription),e.append("EnglishDescription",this.editForm.englishDescription),e.append("PersianDescription",this.editForm.persianDescription),e.append("ArabicDescription",this.editForm.arabicDescription),e.append("EnglishDescription",this.editForm.englishDescription),e.append("PersianDescription",this.editForm.persianDescription),e.append("TheFiles",this.editForm.newFile),e.append("ConferenceVersionID",this.conferenceVersionID);try{await w.A.put(`Files/UpdateFiles?id=${this.editForm.id}`,e,{headers:{"Content-Type":"multipart/form-data"}}),this.$toast.open({message:"تم بنجاح",type:"success"}),this.fetchFiles(this.conferenceVersionID),this.editModal=!1}catch(i){this.$toast.open({message:"يوجد خطا ما",type:"error"})}finally{this.isLoading=!1}},async deleteFiles(e){const{value:i}=await this.$swal({Description:"هل انت متأكد من الحذف",icon:"warning",showCancelButton:!0,confirmButtonText:"نعم",cancelButtonText:"لا"});if(i){this.isLoading=!0;try{await w.A.delete(`Files/DeleteFiles?id=${e}`),this.fetchFiles(this.conferenceVersionID),this.$toast.open({message:"تم بنجاح",type:"success"})}catch(n){this.$toast.open({message:"يوجد خطا ما",type:"error"})}finally{this.isLoading=!1}}},resetForm(){this.form={arabicDescription:"",englishDescription:"",persianDescription:"",newFile:null,conferenceVersionID:null}},resetEditForm(){this.editForm={id:null,arabicDescription:"",englishDescription:"",persianDescription:"",newFile:null,conferenceVersionID:null}}},watch:{currentPage(){this.fetchFiles(this.conferenceVersionID)}}},A=n(6262);const E=(0,A.A)(x,[["render",C]]);var P=E}}]);
//# sourceMappingURL=762.06a46b55.js.map