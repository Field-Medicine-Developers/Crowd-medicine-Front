"use strict";(self["webpackChunkqexal"]=self["webpackChunkqexal"]||[]).push([[94],{6457:function(e,t,i){i.d(t,{A:function(){return d}});var a=i(641);const o={class:"container mt-4 cb",dir:"rtl"};function n(e,t,i,n,r,s){const l=(0,a.g2)("BFormSelect");return(0,a.uX)(),(0,a.CE)("div",o,[t[2]||(t[2]=(0,a.Lk)("h2",{class:"text-center mb-4"},"اختر المؤتمر ",-1)),(0,a.bF)(l,{modelValue:r.form.conferenceVersionID,"onUpdate:modelValue":t[0]||(t[0]=e=>r.form.conferenceVersionID=e),options:r.conferenceVersionsList,onChange:t[1]||(t[1]=e=>s.fetchId())},null,8,["modelValue","options"])])}var r=i(1631),s={name:"conferenceVersionSelect",data(){return{conferenceVersionsList:[],form:{conferenceVersionID:null}}},methods:{async fetchConferenceVersions(){this.isLoading=!0;try{const e=await r.A.get("ConferenceVersion/GetAllConferenceVersions?PageNumber=1&PageSize=100");this.conferenceVersionsList=e.data.items.map((e=>({text:e.arabicName+" - "+e.year,value:e.id})))}catch(e){console.error("Error fetching conference versions:",e)}finally{this.isLoading=!1}},fetchId(){this.$emit("fetch-id",this.form.conferenceVersionID)}},mounted(){this.fetchConferenceVersions()}},l=i(6262);const c=(0,l.A)(s,[["render",n]]);var d=c},94:function(e,t,i){i.r(t),i.d(t,{default:function(){return w}});var a=i(641),o=i(3751),n=i(33);const r={key:0,class:"container mt-4 cb",dir:"rtl"},s={class:"card"},l={class:"card-body"},c={class:"row"},d={class:"col-md-4"},m={class:"col-md-4"},u={class:"col-md-4"},h={class:"card mt-4"},f={class:"card-body"},g={class:"table table-striped table-hover mt-3"},p={class:"btn-group"},b=["onClick"],L=["onClick"],k={class:"mb-3"},C={class:"mb-3"},y={class:"mb-3"};function V(e,t,i,V,v,T){const F=(0,a.g2)("conferenceVersionSelect"),I=(0,a.g2)("BButton"),D=(0,a.g2)("b-pagination"),w=(0,a.g2)("BModal");return(0,a.uX)(),(0,a.CE)(a.FK,null,[(0,a.bF)(F,{onFetchId:T.fetchCategories},null,8,["onFetchId"]),null!==v.conferenceVersionID?((0,a.uX)(),(0,a.CE)("div",r,[t[19]||(t[19]=(0,a.Lk)("h1",{class:"text-center mb-4"},"اقسام اللجان",-1)),(0,a.Lk)("div",s,[(0,a.Lk)("div",l,[(0,a.Lk)("form",{onSubmit:t[3]||(t[3]=(0,o.D$)(((...e)=>T.addCategories&&T.addCategories(...e)),["prevent"]))},[(0,a.Lk)("div",c,[(0,a.Lk)("div",d,[t[10]||(t[10]=(0,a.Lk)("label",{for:"arabicName",class:"form-label"},"الاسم بالعربية",-1)),(0,a.bo)((0,a.Lk)("input",{id:"arabicName",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>v.form.arabicTitle=e),required:"",class:"form-control",placeholder:"الاسم بالعربية"},null,512),[[o.Jo,v.form.arabicTitle]])]),(0,a.Lk)("div",m,[t[11]||(t[11]=(0,a.Lk)("label",{for:"englishName",class:"form-label"},"الاسم بالإنجليزية",-1)),(0,a.bo)((0,a.Lk)("input",{id:"englishName",type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>v.form.englishTitle=e),required:"",class:"form-control",placeholder:"الاسم بالإنجليزية"},null,512),[[o.Jo,v.form.englishTitle]])]),(0,a.Lk)("div",u,[t[12]||(t[12]=(0,a.Lk)("label",{for:"persianName",class:"form-label"},"الاسم بالفارسية",-1)),(0,a.bo)((0,a.Lk)("input",{id:"persianName",type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>v.form.persianTitle=e),required:"",class:"form-control",placeholder:"الاسم بالفارسية"},null,512),[[o.Jo,v.form.persianTitle]])])]),(0,a.bF)(I,{type:"submit",variant:"primary",loading:v.isLoading,"loading-text":"يرجى الانتظار",disabled:v.isLoading},{default:(0,a.k6)((()=>t[13]||(t[13]=[(0,a.eW)("اضافة")]))),_:1},8,["loading","disabled"])],32)])]),(0,a.Lk)("div",h,[(0,a.Lk)("div",f,[(0,a.Lk)("table",g,[t[14]||(t[14]=(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"الرقم"),(0,a.Lk)("th",null,"الاسم بالعربية"),(0,a.Lk)("th",null,"الاسم بالإنجليزية"),(0,a.Lk)("th",null,"الاسم بالفارسية"),(0,a.Lk)("th",null,"الإجراءات")])],-1)),(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(v.categories,((e,t)=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id},[(0,a.Lk)("td",null,(0,n.v_)((v.currentPage-1)*v.pageSize+t+1),1),(0,a.Lk)("td",null,(0,n.v_)(e.arabicTitle),1),(0,a.Lk)("td",null,(0,n.v_)(e.englishTitle),1),(0,a.Lk)("td",null,(0,n.v_)(e.persianTitle),1),(0,a.Lk)("td",null,[(0,a.Lk)("div",p,[(0,a.Lk)("button",{class:"btn btn-warning btn-sm",onClick:t=>T.openEditModal(e)}," تعديل ",8,b),(0,a.Lk)("button",{class:"btn btn-danger btn-sm",onClick:t=>T.deleteCategories(e.id)}," حذف ",8,L)])])])))),128))])]),v.totalPages>1?((0,a.uX)(),(0,a.Wv)(D,{key:0,modelValue:v.currentPage,"onUpdate:modelValue":t[4]||(t[4]=e=>v.currentPage=e),"total-rows":v.totalCount,"per-page":v.pageSize,variant:"primary",class:"mt-3",onChange:e.fetchData},null,8,["modelValue","total-rows","per-page","onChange"])):(0,a.Q3)("",!0)])]),(0,a.bF)(w,{modelValue:v.editModal,"onUpdate:modelValue":t[9]||(t[9]=e=>v.editModal=e),"hide-footer":"","hide-header":""},{default:(0,a.k6)((()=>[(0,a.Lk)("form",{onSubmit:t[8]||(t[8]=(0,o.D$)(((...e)=>T.updateCategories&&T.updateCategories(...e)),["prevent"]))},[(0,a.Lk)("div",k,[t[15]||(t[15]=(0,a.Lk)("label",{for:"editArabicName",class:"form-label"},"الاسم بالعربية",-1)),(0,a.bo)((0,a.Lk)("input",{id:"editArabicName",type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>v.editForm.arabicTitle=e),required:"",class:"form-control",placeholder:"الاسم بالعربية"},null,512),[[o.Jo,v.editForm.arabicTitle]])]),(0,a.Lk)("div",C,[t[16]||(t[16]=(0,a.Lk)("label",{for:"editEnglishName",class:"form-label"},"الاسم بالإنجليزية",-1)),(0,a.bo)((0,a.Lk)("input",{id:"editEnglishName",type:"text","onUpdate:modelValue":t[6]||(t[6]=e=>v.editForm.englishTitle=e),required:"",class:"form-control",placeholder:"الاسم بالإنجليزية"},null,512),[[o.Jo,v.editForm.englishTitle]])]),(0,a.Lk)("div",y,[t[17]||(t[17]=(0,a.Lk)("label",{for:"editPersianName",class:"form-label"},"الاسم بالفارسية",-1)),(0,a.bo)((0,a.Lk)("input",{id:"editPersianName",type:"text","onUpdate:modelValue":t[7]||(t[7]=e=>v.editForm.persianTitle=e),required:"",class:"form-control",placeholder:"الاسم بالفارسية"},null,512),[[o.Jo,v.editForm.persianTitle]])]),(0,a.bF)(I,{type:"submit",variant:"primary",loading:v.isLoading,"loading-text":"يرجى الانتظار"},{default:(0,a.k6)((()=>t[18]||(t[18]=[(0,a.eW)("حفظ التغييرات")]))),_:1},8,["loading"])],32)])),_:1},8,["modelValue"])])):(0,a.Q3)("",!0)],64)}var v=i(1631),T=i(6457),F={components:{conferenceVersionSelect:T.A},data(){return{conferenceVersionID:null,totalPages:0,totalCount:0,pageSize:10,currentPage:1,isLoading:!1,editModal:!1,form:{arabicTitle:"",englishTitle:"",persianTitle:"",conferenceVersionID:null},editForm:{id:null,arabicTitle:"",englishTitle:"",persianTitle:"",conferenceVersionID:null},categories:[]}},methods:{async fetchCategories(e){this.conferenceVersionID=e,this.form.conferenceVersionID=e;try{const t=await v.A.get(`Committees/GetCommitteesCategoryById?PageNumber=${this.currentPage}&PageSize=${this.pageSize}&conferenceVersionID=${e}`);this.categories=t.data.items}catch(t){console.error("Error fetching conference versions:",t)}},async addCategories(){this.isLoading=!0;try{await v.A.post("Committees/AddCommitteesCategory",this.form),this.$toast.open({message:"تم بنجاح",type:"success"}),this.fetchCategories(this.conferenceVersionID)}catch(e){this.$toast.open({message:"يوجد خطا ما",type:"error"})}finally{this.isLoading=!1}},openEditModal(e){this.editForm={...e},this.editModal=!0},async updateCategories(){this.isLoading=!0;try{await v.A.put(`Committees/UpdateCommitteesCategory?id=${this.editForm.id}`,this.editForm),this.fetchCategories(this.conferenceVersionID),this.editModal=!1,this.$toast.open({message:"تم بنجاح",type:"success"})}catch(e){this.$toast.open({message:"يوجد خطا ما",type:"error"})}finally{this.isLoading=!1}},async deleteCategories(e){const{value:t}=await this.$swal({title:"هل انت متأكد من الحذف",icon:"warning",showCancelButton:!0,confirmButtonText:"نعم",cancelButtonText:"لا"});if(t){this.isLoading=!0;try{await v.A.delete(`Committees/DeleteCommitteesCategory?id=${e}`),this.fetchCategories(this.conferenceVersionID),this.$toast.open({message:"تم بنجاح",type:"success"})}catch(i){this.$toast.open({message:"يوجد خطا ما",type:"error"})}finally{this.isLoading=!1}}},resetForm(){this.form={arabicTitle:"",englishTitle:"",persianTitle:"",year:""}},resetEditForm(){this.editForm={id:null,arabicTitle:"",englishTitle:"",persianTitle:"",year:""}}},watch:{currentPage(){this.fetchCategories(this.conferenceVersionID)}}},I=i(6262);const D=(0,I.A)(F,[["render",V]]);var w=D}}]);
//# sourceMappingURL=94.dc12aa6b.js.map